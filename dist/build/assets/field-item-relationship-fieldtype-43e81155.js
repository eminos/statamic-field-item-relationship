function g(e,t,s,n,a,f,u,c){var i=typeof e=="function"?e.options:e;t&&(i.render=t,i.staticRenderFns=s,i._compiled=!0),n&&(i.functional=!0),f&&(i._scopeId="data-v-"+f);var r;if(u?(r=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),a&&a.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(u)},i._ssrRegister=r):a&&(r=c?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),r)if(i.functional){i._injectStyles=r;var _=i.render;i.render=function(d,h){return r.call(h),_(d,h)}}else{var l=i.beforeCreate;i.beforeCreate=l?[].concat(l,r):[r]}return{exports:e,options:i}}const m={mixins:[Fieldtype],data(){return{sourceComponent:null}},computed:{sourceValue(){if(this.config.source_type==="sibling_or_ancestor"&&this.sourceComponent)return this.sourceComponent.value;if(this.config.source_type==="global")return this.meta.source_value},errorMessage(){if(this.sourceValueIsObject&&!["key","value"].includes(this.config.save_as))return`The source field "${this.config.source_field}" data is an object. Please set the "Save as" to "Key" or "Value".`;if(this.itemsAreObjects===!1&&this.config.save_as!=="value")return`The source field "${this.config.source_field}" data is a simple array of strings. Please set the "Save as" to "Value".`;if(this.itemsAreObjects&&this.config.save_as==="value")return`The source field "${this.config.source_field}" data is an array of objects. To save the entire object, please set the "Save as" option to "Object" instead of "Value".`;if(this.config.source_type==="sibling_or_ancestor"&&!this.sourceComponent)return`The source field "${this.config.source_field}" could not be found.`;if(this.config.source_type==="global"&&!this.meta.source_value)return this.meta.error_message},sourceValueIsObject(){if(this.sourceValue)return typeof this.sourceValue=="object"&&!Array.isArray(this.sourceValue)},items(){return this.sourceValue&&this.sourceValueIsObject?Object.keys(this.sourceValue).map(e=>({key:e,value:this.sourceValue[e]})):this.sourceValue??[]},itemsAreObjects(){if(this.items)return this.items[0]&&typeof this.items[0]=="object"&&!Array.isArray(this.items[0])},selected(){if(!(this.value===null||this.value===void 0||this.value===""||!this.items||!this.sourceValue)){if(this.config.save_as==="key")return this.sourceValueIsObject?this.items.find(e=>e.key===this.value):this.items[this.value];if(this.config.save_as==="value")return this.items.find(e=>e===this.value);if(this.config.save_as==="index")return this.items[this.value];if(this.config.save_as==="id")return this.items.find(e=>e._id===(this.value._id??this.value));if(["object","object_key"].includes(this.config.save_as))return this.items.find(e=>e[this.config.object_key]===(this.value[this.config.object_key]??this.value))}}},methods:{onChange(e){if(!e){this.update(null);return}this.config.save_as==="key"&&(this.sourceValueIsObject?this.update(e.key):this.update(this.items.findIndex(t=>t===e))),this.config.save_as==="value"&&(this.sourceValueIsObject?this.update(e.value):this.update(e)),this.config.save_as==="object"&&this.update(e),this.config.save_as==="id"&&this.update(e._id),this.config.save_as==="index"&&(this.itemsAreObjects?this.update(this.items.findIndex(t=>t._id===e._id)):this.update(this.items.findIndex(t=>t===e))),this.config.save_as==="object_key"&&this.update(e[this.config.object_key])},getOptionLabel(e){const t=(s,n,a)=>{if(!n)return;const u=(Array.isArray(n)?n:n.match(/([^[.\]])+/g)).reduce((c,i)=>c&&c[i],s);return u===void 0?a:u};return this.config.option_label_source?t(e,this.config.option_label_source,e):e}},mounted(){if(this.config.source_type==="sibling_or_ancestor"){let t=function(n){return n.replace(/[!"#$%&'()*+,\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")};var e=t;const s=document.querySelector(t(`.publish-field__${this.config.source_field}`));s&&s.__vue__&&(s.__vue__.field&&s.__vue__.field.handle===this.config.source_field||s.__vue__.config&&s.__vue__.config.handle===this.config.source_field)&&(this.sourceComponent=s.__vue__)}}};var p=function(){var t=this,s=t._self._c;return s("div",[s("v-select",{attrs:{"append-to-body":"",value:t.selected,searchable:!1,"get-option-label":t.getOptionLabel,options:t.items},on:{input:t.onChange},scopedSlots:t._u([{key:"no-options",fn:function(){return[s("div",{staticClass:"my-2"},[t._v(' Source field "'+t._s(t.config.source_field)+'" has no items. ')])]},proxy:!0}])}),t.errorMessage?s("div",{staticClass:"mt-2 text-red-500 text-sm",domProps:{textContent:t._s(t.errorMessage)}}):t._e()],1)},v=[],b=g(m,p,v,!1,null,null,null,null);const y=b.exports;Statamic.booting(()=>{Statamic.$components.register("field_item_relationship-fieldtype",y)});
